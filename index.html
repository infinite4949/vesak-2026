<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Vesak Global Lighting | è¡›å¡å…¨çƒé»ç‡ˆ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --gold: #ffd700; --deep-blue: #0a192f; }
        body { margin: 0; background: var(--deep-blue); color: white; font-family: sans-serif; text-align: center; }
        nav { padding: 20px; display: flex; justify-content: space-between; background: rgba(0,0,0,0.5); }
        .hero { padding: 50px 20px; }
        .buddha-img { width: 200px; border-radius: 50%; box-shadow: 0 0 30px var(--gold); }
        #map { height: 500px; width: 90%; margin: 20px auto; border-radius: 15px; border: 1px solid var(--gold); }
        
        /* è“®èŠ±å‘¼å¸ç‡ˆç‰¹æ•ˆ */
        @keyframes breathe {
            0% { transform: scale(1); filter: drop-shadow(0 0 2px gold); }
            50% { transform: scale(1.4); filter: drop-shadow(0 0 15px gold); }
            100% { transform: scale(1); filter: drop-shadow(0 0 2px gold); }
        }
        .lotus-icon { font-size: 28px !important; animation: breathe 2s infinite; display: flex; justify-content: center; align-items: center; }
        .stats-badge { margin: 20px; color: var(--gold); font-size: 1.2em; border: 1px solid var(--gold); padding: 10px 20px; border-radius: 30px; display: inline-block; }
    </style>
</head>
<body>

<nav>
    <div id="nav-title">VESAK GLOBAL LIGHTING | è¡›å¡å…¨çƒé»ç‡ˆ</div>
    <button onclick="toggleLang()" style="color:gold; background:none; border:1px solid gold; cursor:pointer;">EN/ä¸­æ–‡</button>
</nav>

<div class="hero">
    <img src="buddha_vesak.png" class="buddha-img">
    <h2 id="quote-text">ã€Œé¡˜æ…ˆæ‚²ä¹‹å…‰ï¼Œç…§ç ´ä¸–é–“é»‘æš—ã€‚ã€</h2>
    <p id="description">é»æ“Šåœ°åœ–é»äº®è“®èŠ±ï¼Œæ‚¨çš„å–„å¿µå°‡èˆ‡å…¨çƒåŒæ­¥é¡¯ç¤ºã€‚</p>
    <div class="stats-badge" id="stats-area">å…¨çƒå·²åŒ¯èšï¼š<span id="count">0</span> ç›å¿ƒç‡ˆ</div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, push, onValue, onChildAdded } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        // è«‹åœ¨æ­¤è™•è²¼ä¸Šæ‚¨åŸæœ¬çš„ Config (apiKey, databaseURL ç­‰)
        apiKey: "AIzaSyAspVQZ4NhtQUp_U5Cv-6pV9E39oRlAcWg",
  authDomain: "scoutvesak.firebaseapp.com",
  databaseURL: "https://scoutvesak-default-rtdb.firebaseio.com",
  projectId: "scoutvesak",
  storageBucket: "scoutvesak.firebasestorage.app",
  messagingSenderId: "970243032636",
  appId: "1:970243032636:web:cde5f084f35c4aadc86539",
  measurementId: "G-QJ80DCXFHV"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const pointsRef = ref(db, 'points');

    // 100 å¥ç²¾è¯ (å…ˆæ”¾ 10 å¥ç¤ºç¯„ï¼Œæ ¼å¼å·²è¨­å®šå¥½)
    const quotes = [
        { zh: "æ…ˆæ‚²å¿ƒæ˜¯ä¸€åˆ‡åŠŸå¾·çš„æ¯é«”ã€‚", en: "Compassion is the mother of all virtues." },
        { zh: "æå¾—èµ·æ˜¯è°æ˜ï¼Œæ”¾å¾—ä¸‹æ˜¯æ™ºæ…§ã€‚", en: "To lift is clever; to let go is wisdom." },
        { zh: "å¿ƒå¥½å‘½å°±å¥½ï¼Œæ…ˆæ‚²è–æ½”å¥½ã€‚", en: "A good heart brings a good life; compassion is holy." },
        { zh: "çµ¦äººä¿¡å¿ƒï¼Œå¸Œæœ›ï¼Œå–œæ‚…ï¼Œæ–¹ä¾¿ã€‚", en: "Give others confidence, hope, joy, and convenience." },
        { zh: "é¡˜æ…ˆæ‚²ä¹‹å…‰ï¼Œç…§ç ´ä¸–é–“é»‘æš—ã€‚", en: "May the light of compassion illuminate the darkness." },
        { zh: "å¿ƒä¸­æœ‰ä½›ï¼Œæ‰€è¦‹çš†ä½›ã€‚", en: "When there is Buddha in your heart, all you see is Buddha." },
        { zh: "çŸ¥è¶³å¸¸æ¨‚ï¼Œèƒ½å¿è‡ªå®‰ã€‚", en: "Contentment brings joy; patience brings peace." },
        { zh: "å¾®ç¬‘æ˜¯ä¸–ç•Œä¸Šæœ€ç¾çš„è‰²å½©ã€‚", en: "A smile is the most beautiful color in the world." },
        { zh: "è®šç¾æ˜¯ä¸–ç•Œä¸Šæœ€å‹•è½çš„è²éŸ³ã€‚", en: "Praise is the most beautiful sound in the world." },
        { zh: "ä¸€èŠ±ä¸€ä¸–ç•Œï¼Œä¸€è‘‰ä¸€å¦‚ä¾†ã€‚", en: "A world in a flower, a Buddha in a leaf." }
    ];

    let currentLang = 'zh';
    const i18n = {
        zh: { nav: "è¡›å¡å…¨çƒé»ç‡ˆ", desc: "é»æ“Šåœ°åœ–é»äº®è“®èŠ±", countLabel: "å…¨çƒå·²åŒ¯èšï¼š", unit: " ç›å¿ƒç‡ˆ", quote: "ã€Œé¡˜æ…ˆæ‚²ä¹‹å…‰ï¼Œç…§ç ´ä¸–é–“é»‘æš—ã€‚ã€", popup: "é»ç‡ˆæˆåŠŸï¼" },
        en: { nav: "VESAK GLOBAL LIGHTING", desc: "Click to light a lotus", countLabel: "Global Lights: ", unit: " Lights", quote: "Compassion illuminates the world.", popup: "Light Success!" }
    };

    window.toggleLang = function() {
        currentLang = currentLang === 'zh' ? 'en' : 'zh';
        document.getElementById('nav-title').innerText = i18n[currentLang].nav;
        document.getElementById('description').innerText = i18n[currentLang].desc;
        document.getElementById('quote-text').innerText = i18n[currentLang].quote;
        updateDisplay(lastCount);
    };

    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);
    const lotusIcon = L.divIcon({ className: 'lotus-icon', html: 'ğŸª·', iconSize: [30, 30], iconAnchor: [15, 15] });

    map.on('click', (e) => {
        const q = quotes[Math.floor(Math.random() * quotes.length)];
        push(pointsRef, { lat: e.latlng.lat, lng: e.latlng.lng, q_zh: q.zh, q_en: q.en });
    });

    onChildAdded(pointsRef, (data) => {
        const val = data.val();
        const marker = L.marker([val.lat, val.lng], { icon: lotusIcon }).addTo(map);
        marker.bindPopup(`<div style="text-align:center;"><b>${i18n[currentLang].popup}</b><br>${val.q_zh}<br><i>${val.q_en}</i></div>`).openPopup();
    });

    let lastCount = 0;
    function updateDisplay(count) {
        lastCount = count;
        document.getElementById('stats-area').innerHTML = `${i18n[currentLang].countLabel}<span>${count}</span>${i18n[currentLang].unit}`;
    }

    onValue(pointsRef, (snapshot) => { updateDisplay(snapshot.size || 0); });
</script>
</body>
</html>
